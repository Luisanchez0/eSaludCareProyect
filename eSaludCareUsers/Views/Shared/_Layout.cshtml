<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <met a charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Mi aplicación ASP.NET</title>
    @Styles.Render("~/Content/css")
    @*Scripts.Render("~/bundles/modernizr")*@

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>

<body class="index-page">

    <header id="header" class="header d-flex align-items-center fixed-top">
        <div class="container position-relative d-flex align-items-center justify-content-between">

            <a href="@Url.Action("Index","Home")" class="logo d-flex align-items-center me-auto me-xl-0">
                <!-- Uncomment the line below if you also wish to use an image logo -->
                <!-- <img src="assets/img/logo.webp" alt=""> -->
                <h1 class="sitename">eSalud<span>Care</span></h1>
            </a>

            <nav id="navmenu" class="navmenu">
                <ul>
                    <li><a href="@Url.Action("Index", "Home")" class="active">Inicio</a></li>
                    <li><a href="servicios.html">Departamentos</a></li>
                    <li><a href="doctores.html">Servicios</a></li>
                    <li><a href="abour.html">Doctores</a></li>
                    <li class="dropdown">
                    <li><a href="contact.html">Contact</a></li>
                </ul>
                <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>

            </nav>

            <div id="user-section">
                <a id="btnLogin" class="btn-getstarted" href="@Url.Action("Index","Login")">Iniciar Sesión</a>
                <!--dinamico-->
                <div id="user-info" style="display:none;">
                    <span id="user-name" class="text-black fw-bold"></span>
                    <a id="btnLogout" class="btn-getstarted">Cerrar sesión</a>
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        @RenderBody()

        <!-- Hero Section -->





    </main>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const token = localStorage.getItem("token");
            const nombre = localStorage.getItem("nombre");

            const loginBtn = document.getElementById("btnLogin");
            const userInfo = document.getElementById("user-info");
            const userName = document.getElementById("user-name");
            const logoutBtn = document.getElementById("btnLogout");

            if (token && nombre) {
                // Usuario autenticado
                loginBtn.style.display = "none";
                userInfo.style.display = "inline-block";
                userName.textContent = "👋" + nombre + "  ";

                //redireccion al login si esta logeado

                const currentPath = window.location.pathname.toLowerCase();
                if (currentPath.includes("/login")) {
                    window.location.href = ("/Home/Index")
                }
            } else {
                // Usuario no autenticado
                loginBtn.style.display = "inline-block";
                userInfo.style.display = "none";
            }

            // Cerrar sesión
            logoutBtn?.addEventListener("click", function () {
                localStorage.removeItem("token");
                localStorage.removeItem("rol");
                localStorage.removeItem("nombre");
                window.location.href = "/Home/Index";
            });
        });
    </script>
    @*RenderBody()
        <li>@Html.ActionLink("Inicio", "Index", "Home", new { area = "" }, new { @class = "nav-link" })</li>
        <li>@Html.ActionLink("Acerca de", "About", "Home", new { area = "" }, new { @class = "nav-link" })</li>
        <li>@Html.ActionLink("Contacto", "Contact", "Home", new { area = "" }, new { @class = "nav-link" })</li>
        <li>@Html.ActionLink("test", "test", "Home", new { area = "" }, new { @class = "nav-link" })</li>*@


    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/complemento")
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/jqueryval")
    @RenderSection("scripts", required: false)


    <script src="https://bootstrapmade.com/assets/js/demo.js?v=106"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P7JSYB1CSP"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-P7JSYB1CSP');</script>
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"68c5ca450bae485a842ff76066d69420","server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>



</html>
