@model IEnumerable<CapaEntidad.PerfilUsuarioDTO>
@using System.Linq

@{
    ViewBag.Title = "Listado de Perfiles";
}

<style>
    /* Nueva Paleta de Colores: Azul y Dorado Moderno */
    :root {
        --color-azul-intenso: #1A374D; /* Azul oscuro elegante (principal) */
        --color-dorado-vibrante: #D4AF37; /* Dorado clásico y brillante (acento principal) */
        --color-azul-claro: #86BBD8; /* Azul más suave para secundarios/detalles */
        --color-gris-texto: #495057; /* Texto general */
        --color-rojo-peligro: #dc3545; /* Rojo de Bootstrap */
        --color-amarillo-advertencia: #ffc107; /* Amarillo de Bootstrap */
    }

    /* Estilo del Encabezado de la Página */
    h2 {
        color: var(--color-azul-intenso);
        font-weight: 700;
        margin-bottom: 5px;
        font-size: 2rem; /* Ligeramente más grande */
    }

    /* Contador de Perfiles */
    .perfiles-count {
        margin-bottom: 25px;
        font-size: 1rem; /* Ligeramente más grande */
        color: var(--color-gris-texto);
    }

    /* Estilos de Tabla */
    .table thead th {
        background-color: var(--color-azul-intenso); /* Encabezado de tabla: Azul Intenso */
        color: white;
        font-weight: 500;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.8px; /* Mayor espaciado para un look premium */
        border: none !important;
        padding: 15px 18px; /* Mayor padding */
        vertical-align: middle;
    }

    .table tbody tr td {
        padding: 12px 18px; /* Padding ajustado */
        font-size: 0.95rem;
        vertical-align: middle;
        border-color: #e9ecef;
    }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #f5f9fc; /* Fondo a rayas muy sutil para mejor contraste */
    }

    /* Estilos para la Columna de Acciones */
    .action-icons-group a {
        padding: 6px 10px; /* Botones de acción más grandes */
        margin-right: 5px;
        border-radius: 6px; /* Bordes más redondeados */
        font-size: 0.85rem;
        font-weight: 600;
        line-height: 1;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    /* Estilo para el botón de Agregar Usuario (Principal: Dorado Vibrante) */
    .btn-crear-usuario {
        background-color: var(--color-dorado-vibrante); /* Dorado como acento principal */
        color: var(--color-azul-intenso); /* Texto en azul oscuro */
        font-weight: 700;
        padding: 10px 20px;
        border-radius: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 10px rgba(212, 175, 55, 0.3);
    }

        .btn-crear-usuario:hover {
            background-color: var(--color-azul-intenso); /* Azul Intenso al pasar el ratón */
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(26, 55, 77, 0.4);
        }

    /* Colores de Marca y Contraste para los Botones de Acción */
    /* VER: Azul más claro (secundario de marca) */
    .btn-perfil-ver {
        background-color: var(--color-azul-claro);
        color: var(--color-azul-intenso);
        border: 1px solid var(--color-azul-claro);
    }

        .btn-perfil-ver:hover {
            background-color: var(--color-azul-intenso);
            color: white;
            border-color: var(--color-azul-intenso);
        }

    /* EDICIÓN: Mantener Bootstrap Warning pero darle un toque */
    .btn-warning {
        background-color: var(--color-amarillo-advertencia);
        border-color: var(--color-amarillo-advertencia);
        color: #333; /* Texto más oscuro para mejor legibilidad */
    }

        .btn-warning:hover {
            background-color: #e0a800;
            border-color: #e0a800;
        }

    /* ELIMINAR: Mantener Bootstrap Danger */
    .btn-danger {
        background-color: var(--color-rojo-peligro);
        border-color: var(--color-rojo-peligro);
    }

    /* OTROS: Usar colores Neutros/Azules */
    .btn-secondary, .btn-dark {
        background-color: #6c757d;
        border-color: #6c757d;
        color: white;
    }

        .btn-secondary:hover, .btn-dark:hover {
            background-color: #5a6268;
            border-color: #5a6268;
        }
</style>

<h2>Perfiles de Usuario</h2>

<p class="perfiles-count">Total perfiles recibidos: @Model.Count()</p>

@if (Model != null && Model.Any())
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Correo</th>
                <th>Teléfono</th>
                <th>Rol</th>
                <th class="text-center">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var perfil in Model)
            {
                <tr>
                    <td>@perfil.Nombre</td>
                    <td>@perfil.Correo</td>
                    <td>@perfil.Telefono</td>
                    <td>@perfil.Rol</td>

                    <td class="action-icons-group text-center">
                        @if (perfil.Id > 0)
                        {
                            <a href="@Url.Action("Detalles", "Perfiles", new { id = perfil.Id })" class="btn btn-sm btn-perfil-ver">Ver</a>
                        }
                        <a href="@Url.Action("Editar", "Perfiles", new { id = perfil.Id })" class="btn btn-sm btn-warning">Editar</a>
                        <a href="@Url.Action("Eliminar", "Perfiles", new { id = perfil.Id })" class="btn btn-sm btn-danger" onclick="return confirm('¿Eliminar este perfil?');">Eliminar</a>
                        <a href="@Url.Action("CambiarRol", "Perfiles", new { id = perfil.Id })" class="btn btn-sm btn-secondary">Rol</a>
                        <a href="@Url.Action("ResetPassword", "Perfiles", new { id = perfil.Id })" class="btn btn-sm btn-dark">Reset</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <div class="mt-4">
        <a href="@Url.Action("Crear", "Perfiles")" class="btn btn-crear-usuario">
            <i class="fas fa-plus"></i> Agregar Nuevo Usuario
        </a>
    </div>
}
else
{
    <div class="alert alert-warning">
        <strong>Atención:</strong> @ViewBag.Error
    </div>

    <div class="mt-4">
        <a href="@Url.Action("Crear", "Perfiles")" class="btn btn-crear-usuario">
            <i class="fas fa-plus"></i> Agregar Nuevo Usuario
        </a>
    </div>
}